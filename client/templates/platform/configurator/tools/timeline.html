
<template name="versions">

	<div class="timeline-wrapper">
		
		<div class="timeline-item">
			<div class="timeline-info">
                <div class="timeline-icon bg-grey">
                    <i class="fa fa-circle"></i>
                </div>
			</div>

            {{> tool_version_buttons}}

		</div><!-- /timeline-item -->
    
        {{> timeline}}

<!-- 		<div class="timeline-date">
			3 Oct 2013
		</div> -->

		<div class="timeline-item clearfix">
			<div class="timeline-info">
				<div class="timeline-icon bg-grey">
					<i class="fa fa-pencil"></i>
				</div>
			</div>
		</div><!-- /timeline-item -->
	</div><!-- /timeline-wrapper -->

    {{> publishToolVersion}}

</template>

<template name="timeline">
    {{#each versions}}
        <div class="timeline-item">
            <div class="timeline-info">
                {{#if active}}
                    <div class="timeline-icon bg-danger">
                        <i class="fa fa-briefcase"></i>
                    </div>
                {{else}}        
                    <div class="timeline-icon bg-warning">
                        <i class="fa fa-briefcase"></i>
                    </div>
                {{/if}}
            </div>
            <div class="panel panel-default timeline-panel" id="{{_id}}">
                <div class="panel-heading">
                    <span class="label label-success m-left-xs">#{{_id}}</span><span class="label label-warning m-left-xs">{{status}}</span>
                    {{#if active}}
                        <span class="label label-danger m-left-xs">Active</span>
                    {{/if}}
                    <small class="pull-right text-muted">{{date}}</small>
                </div>
                <div class="panel-body">
                    <p>{{comment}}</p>
                    <div class="seperator"></div>
                    <a class="btn btn-success pull" href="#"><i class="fa fa-download"></i> Pull</a>
                </div>
            </div><!-- /panel -->
        </div><!-- /timeline-item -->
    {{/each}}
</template>

<template name="tool_version_buttons">
    {{#with buttons}}
        <div class="panel panel-default timeline-panel version-button-panel">
            <a class="btn btn-success" id="new-version" disabled="{{new_version_disabled}}"><i class="fa fa-file-o"></i> New version</a>
            
            <a class="btn btn-danger" id="remove-version-button" disabled="{{remove_version_disabled}}"><i class="fa fa-trash-o"></i> Remove</a>
            
            <a class="btn btn-primary" id="publish-version-button" disabled="{{publish_version_disabled}}"><i class="fa fa-upload"></i> Publish</a>                 
        </div><!-- /panel -->
    {{/with}}
</template>

<template name="publishToolVersion">
	<!-- Modal for new diagram -->
    <div id="publish-version" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Publish version <span class="label label-success m-left-xs">#{{version_number}}</span></h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <div class="form-group">
                            <label for="comment" class="col-sm-2 control-label">Comment</label>
                            <div class="col-sm-9">
                            	<textarea id="comment" class="form-control" rows="7"></textarea>
                            </div>
                        </div>
                    </form>  
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button id="publish" type="button" class="btn btn-primary">OK</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
	<!-- End of modal -->

</template>
